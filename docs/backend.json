{
  "entities": {
    "Patient": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Patient",
      "type": "object",
      "description": "Represents a patient using the Rams.com platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Patient entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the patient."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the patient."
        },
        "dateOfBirth": {
          "type": "string",
          "description": "The date of birth of the patient.",
          "format": "date-time"
        },
        "gender": {
          "type": "string",
          "description": "The gender of the patient."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact phone number of the patient."
        },
        "email": {
          "type": "string",
          "description": "The email address of the patient.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the patient."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "dateOfBirth",
        "gender",
        "contactNumber",
        "email",
        "address"
      ]
    },
    "Doctor": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Doctor",
      "type": "object",
      "description": "Represents a doctor registered on the Rams.com platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Doctor entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the doctor."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the doctor."
        },
        "specialization": {
          "type": "string",
          "description": "The specialization of the doctor (e.g., Cardiology, Pediatrics)."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact phone number of the doctor."
        },
        "email": {
          "type": "string",
          "description": "The email address of the doctor.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the doctor's clinic or practice."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "specialization",
        "contactNumber",
        "email",
        "address"
      ]
    },
    "MedicalStore": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "MedicalStore",
      "type": "object",
      "description": "Represents a medical store registered on the Rams.com platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MedicalStore entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the medical store."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact phone number of the medical store."
        },
        "email": {
          "type": "string",
          "description": "The email address of the medical store.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the medical store."
        }
      },
      "required": [
        "id",
        "name",
        "contactNumber",
        "email",
        "address"
      ]
    },
    "Lab": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lab",
      "type": "object",
      "description": "Represents a medical laboratory registered on the Rams.com platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Lab entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the lab."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact phone number of the lab."
        },
        "email": {
          "type": "string",
          "description": "The email address of the lab.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the lab."
        }
      },
      "required": [
        "id",
        "name",
        "contactNumber",
        "email",
        "address"
      ]
    },
    "AmbulanceService": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AmbulanceService",
      "type": "object",
      "description": "Represents an ambulance service registered on the Rams.com platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the AmbulanceService entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the ambulance service."
        },
        "contactNumber": {
          "type": "string",
          "description": "The contact phone number of the ambulance service."
        },
        "email": {
          "type": "string",
          "description": "The email address of the ambulance service.",
          "format": "email"
        },
        "address": {
          "type": "string",
          "description": "The address of the ambulance service."
        }
      },
      "required": [
        "id",
        "name",
        "contactNumber",
        "email",
        "address"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/patients/{patientId}",
        "definition": {
          "entityName": "Patient",
          "schema": {
            "$ref": "#/backend/entities/Patient"
          },
          "description": "Stores patient data.  Each patient is identified by their unique ID.",
          "params": [
            {
              "name": "patientId",
              "description": "The unique identifier for the patient."
            }
          ]
        }
      },
      {
        "path": "/doctors/{doctorId}",
        "definition": {
          "entityName": "Doctor",
          "schema": {
            "$ref": "#/backend/entities/Doctor"
          },
          "description": "Stores doctor data. Each doctor is identified by their unique ID.",
          "params": [
            {
              "name": "doctorId",
              "description": "The unique identifier for the doctor."
            }
          ]
        }
      },
      {
        "path": "/medicalStores/{medicalStoreId}",
        "definition": {
          "entityName": "MedicalStore",
          "schema": {
            "$ref": "#/backend/entities/MedicalStore"
          },
          "description": "Stores medical store data. Each medical store is identified by their unique ID.",
          "params": [
            {
              "name": "medicalStoreId",
              "description": "The unique identifier for the medical store."
            }
          ]
        }
      },
      {
        "path": "/labs/{labId}",
        "definition": {
          "entityName": "Lab",
          "schema": {
            "$ref": "#/backend/entities/Lab"
          },
          "description": "Stores lab data. Each lab is identified by their unique ID.",
          "params": [
            {
              "name": "labId",
              "description": "The unique identifier for the lab."
            }
          ]
        }
      },
      {
        "path": "/ambulanceServices/{ambulanceServiceId}",
        "definition": {
          "entityName": "AmbulanceService",
          "schema": {
            "$ref": "#/backend/entities/AmbulanceService"
          },
          "description": "Stores ambulance service data. Each ambulance service is identified by their unique ID.",
          "params": [
            {
              "name": "ambulanceServiceId",
              "description": "The unique identifier for the ambulance service."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to securely manage data for the Rams.com application, focusing on user roles (Patients, Doctors, Medical Stores, Labs, Ambulance Services). Each entity has its own top-level collection. This approach simplifies security rules, as each collection has a homogeneous security posture.\n\n**Authorization Independence:** This design inherently supports authorization independence. Because the app does not implement collaborative features on the data itself (such as collaborative patient records), there is no need to denormalize data for authorization purposes. Each entity manages its own data, which is linked to the Firebase Authentication `uid` via path-based ownership, ensuring that each entity can only access their own data. For the Intelligent Medical Search, this structure allows for efficient querying and filtering based on entity types without needing to perform complex joins or subqueries that might compromise security.\n\n**QAPs (Rules are not Filters):** This structure naturally supports secure `list` operations. Since each role has its own dedicated collection, listing entities is straightforward and doesn't require complex filtering within the rules. For example, listing all Doctors involves querying the `/doctors` collection, and the security rules can easily restrict access based on authentication status and potentially other role-based criteria."
  }
}